(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4b00ff04"],{5e3:function(e,t,s){"use strict";s("8302")},5535:function(e,t,s){"use strict";s.r(t);var n=s("7a23");const c={key:0,class:"all"},r=Object(n["g"])("div",{class:"container"},[Object(n["g"])("div",{class:"alert alert-info admin",role:"alert",style:{"text-align":"center"}}," Admin panel ")],-1),l={class:"table-responsive table-bordered"},a={class:"table-hover",style:{width:"100%"}},i=Object(n["g"])("thead",{class:"thead-light"},[Object(n["g"])("tr",{style:{"text-align":"center"}},[Object(n["g"])("th",null,"User id"),Object(n["g"])("th",null,"Email"),Object(n["g"])("th",null,"Username"),Object(n["g"])("th",null,"Delete")])],-1),b={key:0},u=["onClick"],d={key:1},o={key:1},O=Object(n["g"])("h1",null,"sorry bro this is admin-only club",-1),j=[O];function h(e,t,s,O,h,g){return Object(n["x"])(),Object(n["f"])(n["a"],null,[g.isAdmin?(Object(n["x"])(),Object(n["f"])("div",c,[r,Object(n["g"])("div",l,[Object(n["g"])("table",a,[i,Object(n["g"])("tbody",null,[(Object(n["x"])(!0),Object(n["f"])(n["a"],null,Object(n["D"])(h.users,e=>(Object(n["x"])(),Object(n["f"])("tr",{key:e,class:"res-table-column;",style:{"text-align":"center"}},[Object(n["g"])("td",null,Object(n["H"])(e.id),1),Object(n["g"])("td",null,Object(n["H"])(e.email),1),Object(n["g"])("td",null,Object(n["H"])(e.username),1),"ROLE_USER"==e.roles[0].name?(Object(n["x"])(),Object(n["f"])("td",b,[Object(n["g"])("button",{onClick:t=>g.deleteUser(e.id),onMouseup:t[0]||(t[0]=e=>g.getAllUsers()),class:"btn btn-danger",style:{width:"100%"}},"Delete person",40,u)])):(Object(n["x"])(),Object(n["f"])("td",d,"Can't delete admin"))]))),128))])])])])):Object(n["e"])("",!0),g.isAdmin?Object(n["e"])("",!0):(Object(n["x"])(),Object(n["f"])("div",o,j))],64)}s("14d9");var g=s("bc3a"),m=s.n(g),f=s("c4c6");const U="http://localhost:8080/api/admin/";class p{getAll(){return m.a.get(U,{headers:Object(f["a"])()})}deleteUser(e){return m.a.delete(U+e,{headers:Object(f["a"])()})}}var y=new p,A={name:"Admin",data(){return{users:[]}},computed:{currentUser(){return this.$store.state.auth.user},isAdmin(){return!(!this.currentUser||!this.currentUser["roles"])&&this.currentUser["roles"].includes("ROLE_ADMIN")}},mounted(){this.currentUser||this.$router.push("/login"),this.getAllUsers()},methods:{deleteUser(e){y.deleteUser(e),this.getAllUsers()},getAllUsers(){y.getAll().then(e=>{this.users=e.data}).catch(e=>console.error(e))}}},k=(s("5000"),s("6b0d")),v=s.n(k);const x=v()(A,[["render",h]]);t["default"]=x},8302:function(e,t,s){},c4c6:function(e,t,s){"use strict";function n(){let e=JSON.parse(localStorage.getItem("user"));return e&&e.accessToken?{Authorization:"Bearer "+e.accessToken}:{}}s.d(t,"a",(function(){return n}))}}]);
//# sourceMappingURL=chunk-4b00ff04.12f9860a.js.map