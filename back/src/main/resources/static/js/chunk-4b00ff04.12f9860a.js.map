{"version":3,"sources":["webpack:///./src/components/BoardAdmin.vue?e065","webpack:///./src/components/BoardAdmin.vue","webpack:///./src/services/admin.service.js","webpack:///./src/components/BoardAdmin.vue?4f25","webpack:///./src/services/auth-header.js"],"names":["class","_createElementVNode","role","style","_hoisted_10","$options","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_Fragment","$data","user","key","id","email","username","roles","name","onClick","onMouseup","API_URL","AdminService","getAll","axios","get","headers","authHeader","deleteUser","userId","delete","data","users","computed","currentUser","this","$store","state","auth","isAdmin","includes","mounted","$router","push","getAllUsers","methods","then","response","catch","err","console","error","__exports__","render","JSON","parse","localStorage","getItem","accessToken","Authorization"],"mappings":"+GAAA,W,wECCsBA,MAAM,O,EACxBC,eAIM,OAJDD,MAAM,aAAW,CACpBC,eAEM,OAFDD,MAAM,yBAAyBE,KAAK,QAAQC,MAAA,yBAA0B,mBAE3E,G,GAEGH,MAAM,mC,GACFA,MAAM,cAAcG,MAAA,gB,EACzBF,eAOQ,SAPDD,MAAM,eAAa,CAC1BC,eAKK,MALDE,MAAA,yBAAyB,CAC3BF,eAAgB,UAAZ,WACJA,eAAc,UAAV,SACJA,eAAiB,UAAb,YACJA,eAAe,UAAX,cAAM,G,8CAkBhBA,eAA0C,UAAtC,qCAAiC,G,GAArCG,G,4EA/BSC,WAAO,iBAAlBC,eA6BM,MA7BNC,EA6BM,CA5BJC,EAKAP,eAqBM,MArBNQ,EAqBM,CApBJR,eAmBQ,QAnBRS,EAmBQ,CAlBNC,EAQAV,eASQ,kCARRK,eAOKM,2BAPcC,QAARC,I,iBAAXR,eAOK,MAPsBS,IAAKD,EAAMd,MAAM,oBAAoBG,MAAA,yB,CAC9DF,eAAsB,yBAAfa,EAAKE,IAAE,GACdf,eAAyB,yBAAlBa,EAAKG,OAAK,GACjBhB,eAA4B,yBAArBa,EAAKI,UAAQ,GACY,aAAtBJ,EAAKK,MAAM,GAAGC,MAAI,iBAA5Bd,eACoG,QADvDL,eACkD,UADzCoB,QAAK,GAAEhB,aAAWS,EAAKE,IAAMM,UAAO,eAAEjB,iBAAeL,MAAM,iBAC5DG,MAAA,gBAAoB,gBAAa,2BACtFG,eAAkC,OAAvB,2B,qCAOPD,UAEN,uBAFa,iBAAnBC,eAEM,iB,+CC9BR,MAAMiB,EAAU,mCAEhB,MAAMC,EACFC,SACI,OAAOC,IAAMC,IAAIJ,EAAQ,CAAEK,QAASC,mBAGxCC,WAAWC,GACP,OAAOL,IAAMM,OAAOT,EAAWQ,EAAQ,CAAEH,QAASC,oBAK3C,UAAIL,EDuBJ,GACbJ,KAAM,QACNa,OACE,MAAO,CACLC,MAAO,KAGXC,SAAU,CACRC,cACE,OAAOC,KAAKC,OAAOC,MAAMC,KAAK1B,MAEhC2B,UACE,SAAIJ,KAAKD,cAAeC,KAAKD,YAAY,WAChCC,KAAKD,YAAY,SAASM,SAAS,gBAKhDC,UACON,KAAKD,aACRC,KAAKO,QAAQC,KAAK,UAEpBR,KAAKS,eAEPC,QAAS,CACPjB,WAAWC,GACTP,EAAaM,WAAWC,GACxBM,KAAKS,eAEPA,cACEtB,EAAaC,SAASuB,KACjBC,IACCZ,KAAKH,MAAQe,EAAShB,OAGvBiB,MAAMC,GAAOC,QAAQC,MAAMF,O,iCEnEtC,MAAMG,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAASC,KAErD,gB,yDCTA,SAAS1B,IACpB,IAAIf,EAAO0C,KAAKC,MAAMC,aAAaC,QAAQ,SAE3C,OAAI7C,GAAQA,EAAK8C,YACN,CAACC,cAAe,UAAY/C,EAAK8C,aAEjC,GANf","file":"js/chunk-4b00ff04.12f9860a.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./BoardAdmin.vue?vue&type=style&index=0&id=f8e32c66&lang=css\"","<template>\n  <div v-if=\"isAdmin\" class=\"all\">\n    <div class=\"container\">\n      <div class=\"alert alert-info admin\" role=\"alert\" style=\"text-align:center\">\n        Admin panel\n      </div>\n    </div>\n    <div class=\"table-responsive table-bordered\">\n      <table class=\"table-hover\" style=\"width: 100%\">\n        <thead class=\"thead-light\">\n        <tr style=\"text-align:center\">\n          <th>User id</th>\n          <th>Email</th>\n          <th>Username</th>\n          <th>Delete</th>\n        </tr>\n        </thead>\n        <tbody>\n        <tr v-for=\"user in users\" :key=\"user\" class=\"res-table-column;\" style=\"text-align:center\">\n          <td>{{ user.id }}</td>\n          <td>{{ user.email }}</td>\n          <td>{{ user.username }}</td>\n          <td v-if=\"user.roles[0].name == 'ROLE_USER'\"><button @click=\"deleteUser(user.id)\" @mouseup=\"getAllUsers()\" class=\"btn btn-danger\"\n                                                               style=\"width: 100%\">Delete person</button></td>\n          <td v-else>Can't delete admin</td>\n        </tr>\n        </tbody>\n      </table>\n    </div>\n\n  </div>\n  <div v-if=\"!isAdmin\">\n    <h1>sorry bro this is admin-only club</h1>\n  </div>\n\n</template>\n\n<script>\nimport AdminService from \"../services/admin.service\";\nexport default {\n  name: \"Admin\",\n  data() {\n    return {\n      users: []\n    };\n  },\n  computed: {\n    currentUser() {\n      return this.$store.state.auth.user;\n    },\n    isAdmin() {\n      if (this.currentUser && this.currentUser['roles']) {\n        return this.currentUser['roles'].includes('ROLE_ADMIN');\n      }\n      return false;\n    }\n  },\n  mounted() {\n    if (!this.currentUser) {\n      this.$router.push('/login');\n    }\n    this.getAllUsers();\n  },\n  methods: {\n    deleteUser(userId) {\n      AdminService.deleteUser(userId);\n      this.getAllUsers();\n    },\n    getAllUsers() {\n      AdminService.getAll().then(\n          (response) => {\n            this.users = response.data;\n          }\n      )\n          .catch(err => console.error(err))\n    }\n  }\n};\n</script>\n\n<style>\ntd {\n  padding: 5px 5px 5px 5px;\n}\n.admin {\n  margin-top: 20px;\n}\n</style>","import axios from 'axios';\nimport authHeader from './auth-header';\n\nconst API_URL = 'http://localhost:8080/api/admin/';\n\nclass AdminService{\n    getAll() {\n        return axios.get(API_URL,{ headers: authHeader() });\n    }\n\n    deleteUser(userId) {\n        return axios.delete(API_URL  + userId, { headers: authHeader() });\n    }\n\n\n}\nexport default new AdminService();","import { render } from \"./BoardAdmin.vue?vue&type=template&id=f8e32c66\"\nimport script from \"./BoardAdmin.vue?vue&type=script&lang=js\"\nexport * from \"./BoardAdmin.vue?vue&type=script&lang=js\"\n\nimport \"./BoardAdmin.vue?vue&type=style&index=0&id=f8e32c66&lang=css\"\n\nimport exportComponent from \"/home/mopstream/IdeaProjects/front/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","export default function authHeader() {\n    let user = JSON.parse(localStorage.getItem('user'));\n\n    if (user && user.accessToken) {\n        return {Authorization: 'Bearer ' + user.accessToken};\n    } else {\n        return {};\n    }\n}"],"sourceRoot":""}